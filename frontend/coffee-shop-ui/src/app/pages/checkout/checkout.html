<div class="checkout-container">
  <h1>Checkout</h1>

  <div *ngIf="loading" class="loading">
    <p>Loading checkout...</p>
  </div>

  <div *ngIf="!loading" class="checkout-content">
    <div *ngIf="error" class="error-message">
      {{ error }}
    </div>

    <div *ngIf="success" class="success-message">
      {{ success }}
    </div>

    <div class="checkout-layout">
      
      <aside class="order-summary">
        <h2>Order Summary</h2>
        <div class="summary-items">
          <div *ngFor="let item of cart.items" class="summary-item">
            <div class="item-info">
              <p class="item-name">{{ item.productName }}</p>
              <p class="item-qty">Qty: {{ item.quantity }}</p>
            </div>
            <span class="item-price">${{ formatPrice(item.totalCents) }}</span>
          </div>
        </div>

        <div class="summary-totals">
          <div class="total-row">
            <span>Subtotal:</span>
            <span>${{ formatPrice(cart.totalCents) }}</span>
          </div>
          <div class="total-row">
            <span>Shipping:</span>
            <span>FREE</span>
          </div>
          <div class="total-row">
            <span>Tax:</span>
            <span>$0.00</span>
          </div>
          <div class="total-row grand-total">
            <span>Total:</span>
            <span>${{ formatPrice(cart.totalCents) }}</span>
          </div>
        </div>
      </aside>

      
      <main class="checkout-form">
        <h2>Shipping Information</h2>
        <form (ngSubmit)="onSubmitOrder()">
          <div class="form-row">
            <div class="form-group">
              <label>First Name *</label>
              <input type="text" [(ngModel)]="formData.firstName" name="firstName" required />
            </div>
            <div class="form-group">
              <label>Last Name *</label>
              <input type="text" [(ngModel)]="formData.lastName" name="lastName" required />
            </div>
          </div>

          <div class="form-group">
            <label>Email *</label>
            <input type="email" [(ngModel)]="formData.email" name="email" required />
          </div>

          <div class="form-group">
            <label>Address *</label>
            <input type="text" [(ngModel)]="formData.address" name="address" required />
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>City *</label>
              <input type="text" [(ngModel)]="formData.city" name="city" required />
            </div>
            <div class="form-group">
              <label>Zip Code *</label>
              <input type="text" [(ngModel)]="formData.zipCode" name="zipCode" required />
            </div>
          </div>

          <div class="form-group">
            <label>Phone</label>
            <input type="tel" [(ngModel)]="formData.phone" name="phone" />
          </div>

          <div class="form-actions">
            <button type="submit" [disabled]="submitting || orderPlaced" class="place-order-btn">
              {{ submitting ? 'Processing...' : 'Place Order' }}
            </button>
            <button type="button" routerLink="/cart" class="back-btn" [disabled]="orderPlaced">
              Back to Cart
            </button>
          </div>
        </form>
      </main>
    </div>
  </div>
</div>
